<html> 
<head> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script> 
<script src="skulpt.min.js" type="text/javascript"></script> 
<script src="skulpt-stdlib.js" type="text/javascript"></script> 

</head> 

<body> 

<script type="text/javascript"> 
// output functions are configurable.  This one just appends some text
// to a pre element.
function outf(text) { 
    var mypre = document.getElementById("output"); 
    mypre.innerHTML = mypre.innerHTML + text; 
} 
function builtinRead(x) {
    if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)
            throw "File not found: '" + x + "'";
    return Sk.builtinFiles["files"][x];
}

// Here's everything you need to run a python program in skulpt
// grab the code from your textarea
// get a reference to your pre element for output
// configure the output function
// call Sk.importMainWithBody()
function runit() { 
   var prog = document.getElementById("yourcode").value; 
   var mypre = document.getElementById("output"); 
   mypre.innerHTML = ''; 
   Sk.pre = "output";
   Sk.configure({output:outf, read:builtinRead}); 
   (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'mycanvas';
   var myPromise = Sk.misceval.asyncToPromise(function() {
       return Sk.importMainWithBody("<stdin>", false, prog, true);
   });
   myPromise.then(function(mod) {
       console.log('success');
   },
       function(err) {
       console.log(err.toString());
   });
} 
</script> 

<h3>Try This</h3> 
<form> 
<textarea id="yourcode" cols="40" rows="10">import turtle
import math

class Planet:
    def __init__(self, sx, sy, vx, vy, m, color):
        self.sx = sx
        self.sy = sy
        self.vx = vx
        self.vy = vy
        self.mass = m
        self.color = color
        self.renderer = turtle.Turtle()
        self.renderer.shape("circle")
        self.renderer.penup()
        # set at correct place
        self.renderer.goto(self.sx, self.sy)
        # ...
        self.renderer.getscreen().bgcolor( 0, 0, .2 )
        self.renderer.pencolor("white")
        self.renderer.pendown()
        self.renderer.radians()
    
    def step(self, dt, suns):
        self.ax = 0.0
        self.ay = 0.0
        for s in suns:
            #should iterate over all suns
            a = self.getForce(s)/self.mass
            angle = self.getForceDirection(s)
            self.ax += a*math.cos(angle)
            self.ay += a*math.sin(angle)
        
        self.vx += self.ax*dt
        self.vy += self.ay*dt
        self.sx += self.vx*dt
        self.sy += self.vy*dt


    def getForceDirection(self, sun):
        return self.renderer.towards(sun.sx, sun.sy)

    def getForce(self, sun):
        # get distance between
        dx = self.sx - sun.sx
        dy = self.sy - sun.sy
        # return Force on self
        rsq = dx*dx+dy*dy
#        print (rsq)
        return G * self.mass*sun.mass / rsq

    def show(self):
        self.renderer.fillcolor(self.color)
        self.renderer.goto(self.sx, self.sy)





p1   = Planet( 100.0,   0.0,     0.0,  1400.0,       6.0, "blue")
p2   = Planet(   0.0, 150.0, -1200.0,     0.0,       6.0, "green")
sun = Planet(    0.0,   0.0,     0.0,    -0.0, 2000000.0, "yellow")

G = 100.
T = 5000
dt = 0.02


for t in range(T):
    p1.step(dt, [sun, p2])
    p2.step(dt, [sun, p1])
    sun.step(dt, [p1, p2])
    p1.show()
    p2.show()
    sun.show()</textarea><br /> 
<button type="button" onclick="runit()">Run</button> 
</form> 
<pre id="output" ></pre> 
<!-- If you want turtle graphics include a canvas -->
<div id="mycanvas"></div> 

</body> 

</html> 
